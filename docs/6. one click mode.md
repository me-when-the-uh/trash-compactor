# One-Click Mode

The one-click mode (`src/one_click.py`) automates the compression of high-impact directories and system files. It combines heuristic target selection with the standard compression pipeline.

## Target Resolution

The `resolve_targets` function constructs a list of candidate directories based on environment variables.

It scans `ProgramFiles` and `ProgramFiles(x86)` to target installed applications. It also includes the current user's `AppData` and `Downloads` directories (`%USERPROFILE%`). The resolver normalizes paths to remove duplicates and verifies existence before adding them to the queue.

## System Compression

The module initiates Windows CompactOS compression alongside the file-level operations. The `_spawn_compactos_window` function executes `compact.exe /compactos:always` in a detached PowerShell process. This compresses Windows system binaries independently of the main application flow.

## Execution Pipeline

The `run_one_click_mode` function orchestrates the process in four stages.

### 1. Performance Benchmarking
Upon initialization, `src/launch.py` executes a short CPU benchmark. If the system fails to complete the benchmark in 0.25 seconds, meaning that the processor may be too slow, the program disables LZX compression for the session to preserve system responsiveness.

### 2. Entropy Analysis
The program performs a dry-run analysis (`entropy_dry_run`) on all resolved targets. This step calculates projected savings and identifies compressible data without modifying files or writing anything to the drive to avoid accumulating needless writes and avoid decreasing the SSD service life.

### 3. User Intervention
A countdown timer (`countdown_to_compress`) pauses execution for 300 seconds, allowing the user to review the dry-run statistics and proceed with compression or cancel the operation.

### 4. Compression
The program processes the targets using `execute_compression_plan_wrapper`. This uses the standard compression logic described in [Compression Process](2.%20compression%20process.md).